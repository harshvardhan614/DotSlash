<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Speech to Text</title>
</head>
<body>
  <h1>Speech to Text</h1>
  <button id="startButton">Start Speech Recognition</button>
  <p id="output"></p>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const startButton = document.getElementById('startButton');
      const output = document.getElementById('output');
      let recognition;

      if ('webkitSpeechRecognition' in window) {
        recognition = new webkitSpeechRecognition();

        recognition.continuous = true;
        recognition.interimResults = true;

        recognition.onstart = function() {
          output.textContent = 'Listening...';
        };

        recognition.onerror = function(event) {
          output.textContent = 'Error occurred: ' + event.error;
        };

        recognition.onresult = function(event) {
          let interimTranscript = '';
          let finalTranscript = '';

          for (let i = event.resultIndex; i < event.results.length; i++) {
            const transcript = event.results[i][0].transcript;

            if (event.results[i].isFinal) {
              finalTranscript += transcript + ' ';
            } else {
              interimTranscript += transcript;
            }
            console.log(transcript);
          }

          output.innerHTML = '<p>Interim:</p><p>' + interimTranscript + '</p><p>Final:</p><p>' + finalTranscript + '</p>';
        };

        recognition.onend = function() {
          output.textContent += 'Speech recognition stopped.';
        };

        startButton.addEventListener('click', function() {
          recognition.start();
        });
      } else {
        output.textContent = 'Speech recognition is not supported in this browser.';
      }
    });
  </script>
</body>
</html>
